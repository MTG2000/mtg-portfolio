{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport cookie from \"cookie\";\nimport Router from \"next/router\";\nexport function withAuthServerSideProps(getServerSidePropsFunc) {\n  return async context => {\n    const user = await getUser(context);\n\n    if (getServerSidePropsFunc) {\n      return {\n        props: {\n          user,\n          data: await getServerSidePropsFunc(context, user)\n        }\n      };\n    }\n\n    return {\n      props: {\n        user,\n        data: {\n          props: {\n            user\n          }\n        }\n      }\n    };\n  };\n}\n\nasync function getUser(context) {\n  const {\n    accessToken = \"\"\n  } = cookie.parse(context.req.headers.cookie || \"\"); //   IF not authorized , redirect to login\n\n  if (!accessToken) {\n    context.res.writeHead(302, {\n      Location: \"/login\"\n    });\n    context.res.end();\n  }\n\n  return {\n    accessToken\n  };\n} // withAuthComponent.js\n\n\nexport function withAuthComponent(Component) {\n  return ({\n    user,\n    data\n  }) => {\n    if (!user) {\n      Router.push(\"/login\");\n    }\n\n    return __jsx(Component, data.props);\n  };\n}","map":null,"metadata":{},"sourceType":"module"}